<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>예약조회</title>
</head>

{{> link}}
<link href="/css/owner.css" type="text/css" rel="stylesheet" media="screen,projection"/>
<body>
{{> header}}
<main>
    <div class="row" id="reservation-container" style="margin:3%">
        <div class="row" id="reservation-date-container" style="font-size:25px; color:grey;">
            {{reservations.0.openDate}}의 예약
        </div>
        <div class="row divider"></div>
        <div class="row" id="reservation-list-container">
            <ul class="collection">
            {{#reservations}}
                <li class="collection-item avatar" style="height:140px; padding-left:140px;">
                    <img src="{{menu.imageUrl}}" alt="" class="circle" style="width:120px; height:120px; border-radius:10%">
                    <span class="title" style="margin-left:4%; font-size:35px; font-weight:bold;">
                        <i class="material-icons" style="color: black; font-size:40px">
                            {{#if menu.deleted}}
                            delete_forever
                            {{else}}
                            event_available
                            {{/if}}
                        </i>
                        &nbsp&nbsp
                        {{menu.name}}
                    </span>
                    <div style="margin-left:4%; font-size:25px; color:grey;">
                        <br/>
                        남은 수량 &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        {{availableCount}} / {{menu.maxCount.maxCount}}
                    </div>

                </li>
            {{/reservations}}
            </ul>
        </div>
    </div>
</main>
</body>
{{> footer}}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        let socket = new SockJS('/orderCondition');
        let stompClient = Stomp.over(socket);
        stompClient.connect({}, function (frame) {
            console.log("소켓 연결 성공", frame);
            const url = "/topic/stores" + $('#storeId').value;
            stompClient.subscribe(url, function (response) {
                console.log(JSON.parse(response.body));
            });
        });
    });
</script>
</html>